@using Microsoft.AspNetCore.Identity
@using EasyTalkWeb.Models.ViewModels.ChatViewModels
@inject UserManager<Person> userMnager
@model EasyTalkWeb.Models.ViewModels.ChatViewModels.ChatsListViewModel

<link rel="stylesheet" href="~/css/chat/chat.css" />
<div class="container-template" style="padding: 35px 0; min-height: auto;">
    <div class="chat-container">
        <div class="aside">
            @if (@Model.Chats.Count > 0)
            {
                @foreach (var chat in @Model.Chats)
                {
                    @await Component.InvokeAsync("ChatPreviewComponent", chat)
                    ;
                }
            }
            else
            {
                <div style="color: white; font-weight:400; margin:auto auto;">No chats, <a style="color:azure; font-weight:600; padding: 3px; border-bottom: 1px solid #fff; border-radius:10px;" asp-action="List" asp-controller="FindFreelancer">create one</a></div>
            }
        </div>
        <div class="chat-body">
            <div class="chat-head">
                <div class="chat-head__title"></div>
                <div class="chat-head__activity">
                    <div class="chat-activity__name"></div>
                    <div class="chat-activity__dots">
                        <div class="chat-activity__dot"></div>
                        <div class="chat-activity__dot"></div>
                        <div class="chat-activity__dot"></div>
                    </div>
                </div>
            </div>
            <div class="message-list">
                <div class="no-messages" hidden>No messages yet</div>
            </div>
            <form method="POST" class="actions" enctype="multipart/form-data">
                <input type="text" class="messageInput" name="message" placeholder="write a message" autocomplete="off">
                <input type="file" class="fileInput" name="file">
                <button class="sendMessageBtn" type="button" value="Send">Send</button>
            </form>
        </div>
        <div class="message-list">
            <div class="no-messages" hidden>No messages yet</div>
        </div>
        <form method="POST" class="actions" enctype="multipart/form-data">
            <input type="text" class="messageInput" name="message" placeholder="write a message" autocomplete="off">
            <label class="" for="fileInput" style="padding:8px; cursor:pointer; margin-bottom:10px;">
                <input type="file" class="fileInput" name="file" id="fileInput" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-file-earmark-arrow-up" viewBox="0 0 16 16">
                    <path d="M8.5 11.5a.5.5 0 0 1-1 0V7.707L6.354 8.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 7.707z" />
                    <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z" />
                </svg>
            </label>
            <button class="sendMessageBtn" type="button" value="Send">Send</button>
        </form>
    </div>
    <div class="modal">
        <div class="modal-content">
            <div class="modal-title">Modal Title</div>
            <div class="members">
                <div class="label">Chat members:</div>
                <div class="list"></div>
            </div>
            <p class="about">About:</p>
            <div class="description"></div>
            <input type="text" pattern="\d+" class="final-price" placeholder="enter the final price of the project" />
        </div>
    </div>
</div>
<script src="~/lib/microsoft/signalr/dist/browser/signalr.js"></script>
<script defer src="~/js/chat.js"></script>
